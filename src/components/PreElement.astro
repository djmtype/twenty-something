---
import type {
  BuiltinLanguage,
  LanguageRegistration,
  SpecialLanguage,
  ThemeRegistration,
  ThemeRegistrationRaw,
} from "shiki";
import { Code } from "astro/components";

type Props = {
  file: any
  lang?: BuiltinLanguage | SpecialLanguage | LanguageRegistration
  theme: ThemeRegistration | ThemeRegistrationRaw
  summary?: string
  openState?: boolean
  path: string
}

const {
  file,
  lang = "json",
  theme = "css-variables",
  summary = "Summary",
  openState,
  path,
} = Astro.props as Props
---

<details open={openState ? true : undefined}>
  <summary>{summary}</summary>
  {path && <code class="path">{path}</code>}
  <Code code={file} lang={lang} theme={theme} />
</details>

<style>
  .path {
    color: var(--ink-muted);
    font-style: italic;
  }
</style>
